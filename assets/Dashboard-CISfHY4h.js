import{r as s,j as e,a2 as j,h as m,n as v,i,k as d}from"./index-1iaalndQ.js";import"./index.esm-BEFHA3jK.js";import{g as r,W as S,C as p}from"./WidgetsDropdown-C93rEbZV.js";import{C,a as y}from"./cil-user-C3Ad9PE7.js";import{C as P}from"./CCardFooter-CCKuWrDR.js";import{C as O}from"./CCardHeader-Cec8JUEq.js";import"./CProgress-zZf1CD69.js";import"./DefaultLayout-EuUjBVKy.js";import"./cil-options-sHCm5Gxk.js";const k=()=>{const t=s.useRef(null),[n,u]=s.useState({labels:[],counts:[]}),[f,c]=s.useState(!1),[g,l]=s.useState(null);s.useEffect(()=>{(async()=>{c(!0),l(null);try{const a=await m.get("/api/order-counts");console.log(a.data,"dd"),u(a.data)}catch(a){l("Error fetching order counts. Please try again later."),console.error("Error fetching order counts:",a)}finally{c(!1)}})(),document.documentElement.addEventListener("ColorSchemeChange",()=>{t.current&&setTimeout(()=>{t.current.options.scales.x.grid.borderColor=r("--cui-border-color-translucent"),t.current.options.scales.x.grid.color=r("--cui-border-color-translucent"),t.current.options.scales.x.ticks.color=r("--cui-body-color"),t.current.options.scales.y.grid.borderColor=r("--cui-border-color-translucent"),t.current.options.scales.y.grid.color=r("--cui-border-color-translucent"),t.current.options.scales.y.ticks.color=r("--cui-body-color"),t.current.update()})})},[t]);const h=()=>Math.round(Math.random()*100);return e.jsx(e.Fragment,{children:e.jsx(j,{ref:t,style:{height:"300px",marginTop:"40px"},data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"My First dataset",backgroundColor:`rgba(${r("--cui-info-rgb")}, .1)`,borderColor:r("--cui-info"),pointHoverBackgroundColor:r("--cui-info"),borderWidth:2,data:n.counts.length?n.counts:new Array(12).fill(0),fill:!0},{label:"My Second dataset",backgroundColor:"transparent",borderColor:r("--cui-success"),pointHoverBackgroundColor:r("--cui-success"),borderWidth:2,data:Array.from({length:12},()=>h())},{label:"My Third dataset",backgroundColor:"transparent",borderColor:r("--cui-danger"),pointHoverBackgroundColor:r("--cui-danger"),borderWidth:1,borderDash:[8,5],data:new Array(12).fill(65)}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{color:r("--cui-border-color-translucent"),drawOnChartArea:!1},ticks:{color:r("--cui-body-color")}},y:{beginAtZero:!0,border:{color:r("--cui-border-color-translucent")},grid:{color:r("--cui-border-color-translucent")},max:250,ticks:{color:r("--cui-body-color"),maxTicksLimit:5,stepSize:Math.ceil(250/5)}}},elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}})})},F=()=>{const t=v(),[n,u]=s.useState(0),[f,c]=s.useState(0),[g,l]=s.useState(0),[h,b]=s.useState(0);s.useEffect(()=>{a(),x();const o=setInterval(()=>{a(),x()},5e3);return()=>clearInterval(o)},[]);const a=()=>{m.get("/api/admin/getUserStatusPercentage").then(o=>{u(o.data.onlinePercentage),c(o.data.offlinePercentage)}).catch(o=>console.log(o))},x=()=>{m.get("/api/admin/getWriterStatusPercentage").then(o=>{console.log(o.data,"wirter status"),l(o.data.onlinePercentage),b(o.data.offlinePercentage)}).catch(o=>console.log(o))};return e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mb-4"}),e.jsxs(C,{className:"mb-4",children:[e.jsxs(y,{children:[e.jsx(i,{children:e.jsxs(d,{sm:5,children:[e.jsx("h4",{id:"traffic",className:"card-title mb-0",children:"Order"}),e.jsx("div",{className:"small text-body-secondary",children:"January - November 2024"})]})}),e.jsx(k,{})]}),e.jsx(P,{children:e.jsx(i,{xs:{cols:1,gutter:4},sm:{cols:2},lg:{cols:4},xl:{cols:5},className:"mb-2 text-center"})})]}),e.jsx(i,{children:e.jsx(d,{xs:!0,children:e.jsxs(C,{className:"mb-4",children:[e.jsxs(O,{children:[e.jsx("b",{children:"Online"})," "," & "," ",e.jsx("b",{children:"Offline"})," status"]}),e.jsxs(y,{children:[e.jsx("br",{}),e.jsxs(i,{children:[e.jsx(d,{xs:6,children:e.jsx(p,{className:"mb-3 pointer",progress:{color:"success",value:n},title:"User Status",value:`${n}% Online`,text:`Offline: ${f}%`,onClick:()=>{t("/user/list")}})}),e.jsx(d,{xs:6,children:e.jsx(p,{className:"mb-3 pointer",color:"primary",inverse:!0,progress:{value:g},text:`Offline: ${h}%`,title:"Writers Online",value:`${g}% Online`,onClick:()=>{t("/writer/list")}})})]})]})]})})})]})};export{F as default};
